<mvc:View height="100%" controllerName="lhsusext.controller.PointQuarterly" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"
	xmlns:com="sap.suite.ui.commons" xmlns:viz.data="sap.viz.ui5.data" xmlns:viz="sap.viz.ui5.controls" xmlns:l="sap.ui.layout"
	xmlns:form="sap.ui.layout.form" xmlns:mic="sap.suite.ui.microchart" xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds" xmlns="sap.m">
	<Page id="idPage" navButtonPress="onNavBack" showNavButton="false">
		<customHeader>
			<Bar>
				<contentLeft>
					<!--<Image src="img/Reveal-Logo.png" tooltip="Reveal Logo"/>-->
				</contentLeft>
				<contentMiddle>
					<Text text="{Global>/ClientName} oVo Sustainment"/>
				</contentMiddle>
				<contentRight>
					<Button icon="sap-icon://home" press="onHomePress" type="Default"/>
				</contentRight>
			</Bar>
		</customHeader>
		<content>
			<Panel width="auto" class="sapUiResponsiveMargin" visible="true">
				<Panel height="auto" width="83%" class="sapUiResponsiveMargin">
					<headerToolbar>
						<Toolbar height="3rem">
							<Title text="Points Consumption by Quarter"/>
						</Toolbar>
					</headerToolbar>
					<content>
						<com:ChartContainer id="idChartContainer" showFullScreen="true" showPersonalization="false" autoAdjustHeight="false" showLegend="true"
							showZoom="true" personalizationPress="attachPersonalizationPress" showLegendButton="true" contentChange="attachContentChange" visible="true">
							<com:dimensionSelectors>
								<Label text="Value Label:" design="Bold"></Label>
								<Switch state="true" id="idShowData" change="onShowData">
									<layoutData>
										<FlexItemData growFactor="1"/>
									</layoutData>
								</Switch>
							</com:dimensionSelectors>
							<com:content>
								<com:ChartContainerContent icon="sap-icon://vertical-bar-chart">
									<com:content>
										<viz:VizFrame id="idVizFrame" uiConfig="{applicationSet:'fiori'}" height='450px' width="100%" vizType='stacked_column'>
											<viz:dataset>
												<viz.data:FlattenedDataset data="{path: '/Collection'}">
													<viz.data:dimensions>
														<viz.data:DimensionDefinition name="Quarter" value="{path: 'Quarter', formatter: 'lhsusext.util.formatter.formatQuarter'}"/>
													</viz.data:dimensions>
													<viz.data:measures>
														<viz.data:MeasureDefinition name="TotalPoints" value="{TotalPoints}"/>
														<viz.data:MeasureDefinition name="SDMPoints" value="{SDMPoints}"/>
													</viz.data:measures>
												</viz.data:FlattenedDataset>
											</viz:dataset>
											<viz:feeds>
												<viz.feeds:FeedItem id='valueAxisFeed' uid="valueAxis" type="Measure" values="TotalPoints"/>
												<viz.feeds:FeedItem uid="valueAxis" type="Measure" values="SDMPoints"/>
												<viz.feeds:FeedItem id='categoryAxisFeed' uid="categoryAxis" type="Dimension" values="Quarter"/>
											</viz:feeds>
										</viz:VizFrame>
									</com:content>
								</com:ChartContainerContent>
							</com:content>
						</com:ChartContainer>
					</content>
				</Panel>
				<Panel height="auto" width="auto" class="sapUiResponsiveMargin">
					<content>
						<Table id="report" inset="false" items="{path: 'ReportModel>/DataCollection'}">
							<headerToolbar>
								<Toolbar>
									<Title text="Quarter Points Summary Report" level="H2"/>
									<ToolbarSpacer/>
									<Title text="Year:" level="H3"/>
									<Text id="idSelectedYear" text="{path: 'ReportModel>/SelectedYear'}"/>
									<Title text="Quarter:" level="H3"/>
									<ComboBox id="comboQuarter" items="{path: '/Collection'}" placeholder="Select..." selectionChange="handleSelectionChange" selectionFinish="handleSelectionFinish" width="200px">
										<core:Item key="{Quarter}" text="{Key}"/>
										<!--<core:Item key="2" text="Q2"/>
										<core:Item key="3" text="Q3"/>
										<core:Item key="4" text="Q4"/>-->
									</ComboBox>
								</Toolbar>
							</headerToolbar>
							<columns>
								<Column width="4em">
									<Text text="Request Number"/>
								</Column>
								<Column hAlign="Center">
									<Text text="Description"/>
								</Column>
								<Column hAlign="Center">
									<Text text="Close Time"/>
								</Column>
								<Column hAlign="Center">
									<Text text="Status"/>
								</Column>
								<Column hAlign="Center">
									<Text text="Priority"/>
								</Column>
								<Column hAlign="Center">
									<Text text="Customer User"/>
								</Column>
								<Column hAlign="Center">
									<Text text="CustomerID"/>
								</Column>
								<Column hAlign="Center">
									<Text text="Type"/>
								</Column>
								<Column hAlign="Center">
									<Text text="Points"/>
								</Column>
							</columns>
							<items>
								<ColumnListItem>
									<cells>
										<Text text="{ReportModel>Ticket#}"/>
										<Text text="{ReportModel>Title}"/>
										<Text text="{path: 'ReportModel>Close Time', sorter: {path: 'Close Time'}, formatter: 'lhsusext.util.formatter.dateFormat'}"/>
										<Text text="{ReportModel>State}"/>
										<Text text="{ReportModel>Priority}"/>
										<Text text="{ReportModel>Customer User}"/>
										<Text text="{ReportModel>CustomerID}"/>
										<Text text="{ReportModel>Type}"/>
										<Text text="{ReportModel>Points}"/>
									</cells>
								</ColumnListItem>
							</items>
						</Table>
					</content>
					<l:VerticalLayout width="100%">
						<l:content>
							<Panel>
								<headerToolbar>
									<Toolbar>
										<Title level="H2" text="Sum"/>
										<ToolbarSpacer/>
										<Label text="{ReportModel>/TotalPoints}" design="Bold"/>
									</Toolbar>
								</headerToolbar>
								<FlexBox height="40px" alignItems="Start" justifyContent="End">
									<items>
										<Label class="sapUiSmallMargin" text="Points" design="Bold"/>
										<Label class="sapUiSmallMargin" text="Support Ticket Points"/>
										<Label class="sapUiSmallMargin" text="{ReportModel>/TotalPoints}"/>
									</items>
								</FlexBox>
								<FlexBox height="40px" alignItems="Start" justifyContent="End">
									<items>
										<Label class="sapUiSmallMargin" text="" design="Bold"/>
										<Label class="sapUiSmallMargin" text="Other Points"/>
										<Label class="sapUiSmallMargin" text="0"/>
									</items>
								</FlexBox>
								<FlexBox height="40px" alignItems="Start" justifyContent="End">
									<items>
										<Label class="sapUiSmallMargin" text="" design="Bold"/>
										<Label class="sapUiSmallMargin" text="Reveal SDM"/>
										<Label class="sapUiSmallMargin" text="{ReportModel>/RevealSDM}"/>
									</items>
								</FlexBox>
							</Panel>
							<Panel>
								<FlexBox height="40px" alignItems="Start" justifyContent="End">
									<items>
										<Label class="sapUiSmallMargin" text=""/>
										<Label class="sapUiSmallMargin" text="Grand Total" design="Bold"/>
										<Label class="sapUiSmallMargin" text="{ReportModel>/GrandTotal}" design="Bold"/>
									</items>
								</FlexBox>
							</Panel>
							<Panel>
								<FlexBox height="40px" alignItems="Start" justifyContent="End">
									<items>
										<Label class="sapUiSmallMargin" text="Points Consumed"/>
										<Label class="sapUiSmallMargin" text=""/>
										<Label class="sapUiSmallMargin" text="{ReportModel>/GrandTotal}"/>
									</items>
								</FlexBox>
								<FlexBox height="40px" alignItems="Start" justifyContent="End">
									<items>
										<Label class="sapUiSmallMargin" text="Points Allowed"/>
										<Label class="sapUiSmallMargin" text=""/>
										<Label class="sapUiSmallMargin" text="{ReportModel>/MonthlyPoints}"/>
									</items>
								</FlexBox>
							</Panel>
							<Panel>
								<FlexBox height="40px" alignItems="Start" justifyContent="End">
									<items>
										<Label class="sapUiSmallMargin" text="Rollover Points" design="Bold"/>
										<Label class="sapUiSmallMargin" text=""/>
										<Label class="sapUiSmallMargin" text="{ReportModel>/RolloverPoints}" design="Bold"/>
									</items>
								</FlexBox>
							</Panel>
						</l:content>
					</l:VerticalLayout>
				</Panel>
			</Panel>
		</content>
		<footer>
			<OverflowToolbar id="otbFooter">
				<ToolbarSpacer/>
				<Button type="Emphasized" icon="sap-icon://print" text="Print" press="onPDFPressed">
					<layoutData><OverflowToolbarLayoutData moveToOverflow="false"/></layoutData>
				</Button>
			</OverflowToolbar>
		</footer>
	</Page>
</mvc:View>